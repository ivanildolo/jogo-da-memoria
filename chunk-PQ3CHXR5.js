import{a as V,b as z,h as _,i as H,l as R,m as Y,o as Z}from"./chunk-NGDS2ZRQ.js";import{$ as g,A as I,Na as S,Pa as d,Qa as C,_ as l,a as f,ba as j,ca as O,db as y,f as F,fb as c,gc as G,ha as h,hb as U,ia as u,ic as N,j as k,kb as $,lb as D,mb as o,nb as a,ob as p,q as P,qa as w,qb as T,tb as E,vb as b,y as x}from"./chunk-2F6PN5SG.js";var v=(()=>{let t=class t{constructor(r){this.http=r}getCards(r){let e="https://api.pokemontcg.io/v1/cards",n=new V({fromObject:f({},r)});return this.http.get(e,{params:n})}};t.\u0275fac=function(e){return new(e||t)(w(z))},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var M=(()=>{let t=class t{flipCard(r,e){return new F(n=>{n.complete()})}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var A=(()=>{let t=class t{constructor(){this.isFlipped=!0}ngOnInit(){this.isFlipped===void 0&&setTimeout(()=>{this.isFlipped=!1},3e3)}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l({type:t,selectors:[["app-card"]],inputs:{imageUrl:"imageUrl",isFlipped:"isFlipped"},decls:5,vars:3,consts:[[1,"card-container"],[1,"card"],[1,"front-face"],[1,"back-face"],["alt","Card Image",3,"src"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),p(2,"div",2),o(3,"div",3),p(4,"img",4),a()()()),e&2&&(d(),U("flipped",n.isFlipped===void 0?!0:n.isFlipped),d(3),c("src",n.imageUrl,S))},styles:['.card-container[_ngcontent-%COMP%]{width:240px;height:330px;margin:1.5rem;float:left}.card[_ngcontent-%COMP%]{width:240px;height:330px;position:relative;transform-style:preserve-3d;transition:transform .5s}.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.front-face[_ngcontent-%COMP%], .back-face[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;backface-visibility:hidden}.front-face[_ngcontent-%COMP%]{background-image:url("./media/yugioh-card-back-ZPAXHP2Z.jpeg");background-size:100% 100%}.back-face[_ngcontent-%COMP%]{transform:rotateY(180deg)}.back-face[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}']});let i=t;return i})();var W=(i,t)=>t.id;function tt(i,t){i&1&&(o(0,"div",2),p(1,"mat-spinner"),a())}function et(i,t){if(i&1){let s=T();o(0,"app-card",5),E("click",function(){j(s);let e=b(),n=e.$implicit,q=e.$index,J=b();return O(J.flipCard(n,q))}),a()}if(i&2){let s=b().$implicit;c("isFlipped",s.toogleFlip)("imageUrl",s.imageUrl)}}function it(i,t){if(i&1&&(o(0,"div",3),y(1,et,1,2,"app-card",4),a()),i&2){let s=t.$implicit;d(),c("ngIf",!s.hiddenCard)}}var B=(()=>{let t=class t{constructor(r,e,n){this.httpPokemonCards=r,this.memoryGameValidator=e,this.dialog=n,this.doubleCards=[],this.loading=!1,this.cartasSubject$=new k([])}getCards(){this.loading=!0;let r={pageSize:5,page:Math.floor(Math.random()*2728)};this.httpPokemonCards.getCards(r).subscribe(e=>{this.doubleCards=[...e.cards,...e.cards].map(n=>f({},n)).sort(()=>Math.random()-.5),this.loading=!1})}flipCard(r,e){if(!(r.toogleFlip===!0||this.secondCard?.toogleFlip===!0)){if(r.toogleFlip=!0,this.firstCard===void 0){this.firstCard=r,this.firstCardIndex=e;return}if(this.firstCard!==void 0&&this.secondCard===void 0&&(this.secondCard=r),this.firstCard?.id===this.secondCard?.id&&this.firstCardIndex!==e){x(2e3).subscribe(()=>{this.firstCard!==void 0&&(this.firstCard.hiddenCard=!0,this.firstCard=void 0),this.secondCard!==void 0&&(this.secondCard.hiddenCard=!0,this.secondCard=void 0),this.cartasSubject$.next(this.doubleCards)});return}this.firstCard?.id!==this.secondCard?.id&&this.firstCardIndex!==e&&x(2e3).subscribe(()=>{this.firstCard&&this.secondCard!==void 0&&(this.firstCard.toogleFlip=!1,this.firstCard=void 0,this.secondCard.toogleFlip=!1,this.secondCard=void 0)})}}openDialog(){this.dialog.open(R,{data:{animal:"panda",name:"Urso"},width:"450px",height:"250px"}).afterClosed().subscribe(e=>{this.getCards()})}ngOnInit(){this.getCards(),this.cartasSubject$.pipe(I(r=>r.length>0),P(r=>r.every(e=>e.hiddenCard===!0))).subscribe(r=>{r&&this.openDialog()})}};t.\u0275fac=function(e){return new(e||t)(C(v),C(M),C(H))},t.\u0275cmp=l({type:t,selectors:[["app-game"]],decls:4,vars:1,consts:[["class","back-drop",4,"ngIf"],[1,"grid-container"],[1,"back-drop"],[1,"grid-item"],[3,"isFlipped","imageUrl","click",4,"ngIf"],[3,"isFlipped","imageUrl","click"],["class","grid-item"]],template:function(e,n){e&1&&(y(0,tt,2,0,"div",0),o(1,"div",1),$(2,it,2,1,"div",6,W),a()),e&2&&(c("ngIf",n.loading),d(2),D(n.doubleCards))},dependencies:[G,Y,A],styles:[".back-drop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:1}.back-drop[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));grid-gap:10px}.grid-container[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]{margin:auto}"]});let i=t;return i})();var rt=[{path:"",component:B}],X=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g({type:t}),t.\u0275inj=u({imports:[_.forChild(rt),_]});let i=t;return i})();var It=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g({type:t}),t.\u0275inj=u({providers:[v,M],imports:[N,X,Z]});let i=t;return i})();export{It as GameModule};
